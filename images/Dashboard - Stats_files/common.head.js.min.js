(function(d){var l={};Object.defineProperty(d,"uiPerms",{configurable:!1,enumerable:!0,writable:!1,value:l});d.initUIPerms=function(g){var d;"string"===typeof g&&(g=JSON.parse(atob(g)));for(d in g)Object.defineProperty(l,d,{configurable:!1,enumerable:!0,writable:!1,value:g[d]})}})(window);(function(d){function l(a){var b=e(a).grade;a=q(a).map(function(a){return a.planId+""});var c=Infinity;a.filter(function(a){return e(a).grade>b}).forEach(function(a){a=e(a);c=Math.min(a.grade,c)});return Infinity===c?[]:a.filter(function(a){return e(a).grade===c})}function g(a){return l(a).map(e)}function r(a){a=e(a);var b="TIER"+a.grade;"MOBILE"===a.type&&(b+="_MOBILE");return b}function h(a,b,c){a=v(a);var k=e(b?b:getSafe("$.dmx.site.planId")).planId;b=!!a&&n(a.availableInPlans,k);a&&t[a.id]&&(b=
b&&t[a.id](k,c));return b}function w(a){return e(a).canResellerPublish}function u(a,b,c,k){var d=q(a),f=Infinity,g;d.forEach(function(d){h(b,d,k)&&d.grade<f&&(e(a).grade<d.grade||!c)&&(g=d,f=d.grade)});return g}function q(a){a=e(a);for(var b=[a],c=a;null!=c.parentId;)c=e(c.parentId),b.push(c);x(a,b);return b}function x(a,b){a.children&&0!=a.children.length&&a.children.forEach(function(a){a=e(a);b.push(a);x(a,b)})}function B(a){Object.keys(a).forEach(function(b){var c=a[b];p(c,{tooltipSettings:c.tooltipSettings?
c.tooltipSettings:{title:"",upgrades:[]},featuresMetadata:y[b+""]||{}})});return a}function C(a){Object.keys(a).forEach(function(b){Object.keys(a[b]).forEach(function(c){Object.keys(a[b][c]).forEach(function(k){a[b][c][k]=d.dmStr[a[b][c][k]]||a[b][c][k]})})});return a}function D(){var a={},b=Object.keys(f);b.forEach(function(b){f[b].features.forEach(function(b){a[b]=a[b]||{name:E[b]||b,tiers:[],availableInPlans:[],minimalPlan:Infinity,id:b}})});Object.keys(a).forEach(function(c){b.forEach(function(b){var d=
f[b],e=r(d);!n(a[c].availableInPlans,b)&&n(d.features,c)&&(n(a[c].tiers,e)||a[c].tiers.push(e),a[c].availableInPlans.push(b))});a[c].tiers.sort()});return a}function F(){Object.keys(f).forEach(function(a){a=f[a];Object.freeze(a.tooltipSettings);Object.freeze(a)});Object.freeze(f);Object.keys(m).forEach(function(a){Object.freeze(m[a])});Object.freeze(m)}function n(a,b){var c=-1!==a.indexOf(b)||b&&b.toString&&-1!==a.indexOf(b.toString());c||(b=b.toString(),c=-1!==a.indexOf(b)||b&&b.toString&&-1!==a.indexOf(b.toString()));
return c}function p(a,b){Object.keys(b).forEach(function(c){a[c]=b[c]});return a}function e(a){"object"!==typeof a?a=f[a.toString()]:a.id&&(a=f[a.id]);return a}function v(a){"object"!==typeof a&&(a=m[a]);return a}var E={USE_CUSTOM_DOMAIN:"custom-domain",BACKUPS:"site-backup",HIDE_PAGE_PER_DEVICE:"hide-page-per-device",EDIT_BACKGROUND:"edit-background",HIDE_PER_DEVICE:"hide-per-device",CSS_EDITOR:"css-editor",REMOVE_FOOTER:"remove-footer",URL_REDIRECT:"url-redirect",ECOMMERCE_MEDIUM:"100-products-store",
ECOMMERCE_LARGE:"2500-products-store",ECOMMERCE_X_LARGE:"unlimited-products-store",PASSWORD_PROTECTED_PAGES:"password-protected-pages"},t={USE_CUSTOM_DOMAIN:function(a){return d.isReseller?w(a):!0},ADD_PAGE:function(a){return f[a].featuresMetadata.ADD_PAGE&&(a=f[a].featuresMetadata.ADD_PAGE.pages_limit)?(a=parseInt(a),-1==a||$.dmx.sitePages.length-1<a):!0},CUSTOM_WIDGET:function(a,b){a=f[a];var c=a.featuresMetadata.CUSTOM_WIDGET;if(c&&c["allowed.widgets"]&&b){c=c["allowed.widgets"].split(",").map(function(a){return a.trim()});
if(0<=_.indexOf(c,b.widgetId))return!0;if(null!=a.parentId)return t.CUSTOM_WIDGET(a.parentId,b)}return!1}},G="12356789".split(""),f={},m={},z={},y={},A={};p(z,{init:function(a){var b=JSON.parse(atob(a.encodedPlans));a=JSON.parse(atob(a.encodedPlanFeaturesMetadata));p(y,C(a));p(f,B(b));p(m,D());F()},isFreePlan:function(a){return(a=e(a))?a.isFree&&this.isDPlan(a):!1},getTierName:r,plans:f,features:m,getNextPlansIds:l,getNextPlans:g,getNextTiers:function(a){return g(a).map(r).sort()},isFeatureInPlan:h,
getPlanObject:function(a){return e(a)},getPlanStoreSize:function(a){var b;h("ECOMMERCE_X_LARGE",a)?b="extralarge":h("ECOMMERCE_LARGE",a)?b="large":h("ECOMMERCE_MEDIUM",a)?b="medium":h("ECOMMERCE_SMALL",a)&&(b="small");return b},getPlanStoreSizeKey:function(a){var b;h("ECOMMERCE_X_LARGE",a)?b="ECOMMERCE_X_LARGE":h("ECOMMERCE_LARGE",a)?b="ECOMMERCE_LARGE":h("ECOMMERCE_MEDIUM",a)?b="ECOMMERCE_MEDIUM":h("ECOMMERCE_SMALL",a)&&(b="ECOMMERCE_SMALL");return b},getMaximalPlan:function(a){a=q(a);var b=-Infinity,
c;a.forEach(function(a){a.grade>b&&(c=a,b=a.grade)});return c},getMinimalPlanWithFeature:u,getPlanDisplayName:function(a){a=e(a)?e(a).name:"unknown";return d.dmStr["ui.plans."+a]||a},canResellerPublishWithinPlan:w,getPlanFeatureMetadata:function(a,b){b=v(b);return b?(a=u(a,b))?a.featuresMetadata[b.id]:null:null},getFilterablePlans:function(){return[3,2,6,7,5].map(e).filter(function(a){return"undefined"!==typeof a})},isDPlan:function(a){a=a||$.dmx.site.planId;a=e(a);return n(G,a.planId)},addWidgetFeature:function(a,
b){A[a]=b},getWidgetFeature:function(a){return A[a]},isFeatureAvailableInTier:function(a,b){return null!=u(a,b,!1)},getAllTierPlans:q});d.plansService=z})(window);(function(d){var l={openPopup:function(d){$.modulesManager.getModuleAsync("stripePopup").then(function(g){g.openStripePopup(d)})}};d.$&&($.stripeService=l)})(window);